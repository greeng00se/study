> 오브젝트를 읽고 정리한 글입니다.
> 

### 개요

- 3장에서는 객체지향 패러다임의 관점에서 핵심인 역할, 책임, 협력에서 대해서 설명하고 있습니다.

### 객체지향

- 객체지향의 본질 → 협력하는 객체들의 공동체를 창조하는 것입니다.
- 객체지향 설계의 핵심 → 협력을 구성하기 위해 적절한 객체를 찾고 적절한 책임을 할당하는 과정에서 드러납니다.
- 객체지향의 원칙을 따르는 애플리케이션의 제어 흐름은 하나의 객체에 통제되지 않고 다양한 객체들 사이에 균형 있게 분배되는 것이 일반적입니다.

### 객체지향 패러다임 관점에서의 핵심

- 협력 → 애플리케이션의 기능을 구현하기 위해 메시지를 주고받은 객체들 사이의 상호작용
- 책임 → 객체가 다른 객체와 협력하기 위해 수행하는 행동
- 역할 → 대체 가능한 책임의 집합

### 협력

- 객체지향 시스템에서의 객체는 기능이라는 목표를 위해 다른 객체와 협력하는 사회적인 존재입니다.
- 2장의 예제에서는 `Screening`이 `Movie`에게 요금계산에 대한 작업을 위임하고 있습니다.
    - `Movie`가 요금 계산에 필요한 기본 요금과 할인 정책을 가장 잘 알고 있기 때문입니다.
    - 만약 `Screening`이 요금 계산을 수행한다면 `Movie`의 인스턴스 변수에 접근해야되기 때문에 캡슐화가 깨집니다.
    - 캡슐화가 깨지고 두 객체 사이의 결합도가 강해지면서 결국 `Movie`가 자율적인 객체가 될 수 없습니다.
- 객체의 자율성을 보장하려면 필요한 정보와 정보에 기반한 행동을 같은 객체에 모아야합니다.
- 자율적인 객체는 필요한 정보를 알지 못하거나 외부의 도움이 필요한 경우 메시지를 통해 협력할 수 있습니다.

### 협력과 문맥

- 어떠한 객체가 필요한 이유는 해당 객체가 협력에 참여하고 있기 때문입니다.
- 해당 객체가 협력에 참여할 수 있는 이유는 협력에 필요한 행동을 보유하고 있기 때문입니다.
- 2장의 예제에서 `Movie`가 가지고 있는 메서드들은 모두 요금을 계산하는 행동과 관련된 것입니다.
    - `Movie`가 영화를 예매하기 위한 협력에 참여하고, 그 안에서 요금을 계산하는 책임을 가지고 있기 때문입니다.
- 협력은 객체의 행동을 결정하고, 객체의 행동은 객체의 상태를 결정합니다.
- 결과적으로 협력이 객체를 구성하는 행동과 상태를 결정하기 때문에 협력은 객체를 설계하는 데 필요한 일종의 문맥을 제공한다고 볼 수 있습니다.
- 저는 문맥을 코드의 논리적 흐름으로 이해했습니다.

### 책임

- 객체에 의해 정의되는 응집도 있는 행위의 집합으로 객체의 상태와 행동을 개략적으로 서술한 문장입니다.
- 추가로 책임을 부여하는 원칙에 대한 패턴인 [GRASP 패턴](https://www.hanbit.co.kr/channel/category/category_view.html?cms_code=CMS8586826397)이라는 것도 있습니다.

### 책임 할당

- 자율적인 객체를 만드는 방법은 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 책임을 할당하는 것입니다.
- 객체지향 설계는 협력에 필요한 메시지를 찾고 메시지에 적절한 객체를 선택하는 반복적인 과정을 통해 이뤄집니다.
    - 메시지가 메시지를 수신할 객체의 책임을 결정합니다.

### 책임 주도 설계(RDD)

- 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법입니다.
- 책임 주도 설계 방법의 과정은 다음과 같습니다.
    - 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악합니다.
    - 시스템 책임을 더 작은 책임으로 분할합니다.
    - 분할된 책임을 수행하는 적절한 객체를 찾아 책임을 할당합니다.
    - 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 객체를 찾습니다.
    - 객체에게 책임을 할당함으로써 두 객체가 협력하게 됩니다.

### 메시지가 객체를 결정한다.

- 객체가 최소한의 인터페이스를 가집니다.
    
    > 객체는 실제로 협력에 필요한 메시지 이외의 불필요한 메시지를 공용 인터페이스에 포함하지 않아도 됩니다. 협력이라는 문맥을 고려하지 않고 객체 자체에 초점을 맞추는 경우에는 사용되지 않는 불필요한 메시지가 인터페이스를 더럽히는 것을 방지할 수 없습니다. 
    - 객체지향의 사실과 오해 p.168
    > 
- 충분히 추상적인 인터페이스를 가집니다.
    - 너무 구체적이지 않은 충분히 추상적인 인터페이스는 객체의 자율성을 보장해주기 때문에 중요합니다.
    - 메시지는 외부의 객체가 요청하는 무언가를 의미하기 때문에 메시지를 먼저 식별한다면 무엇을 수행할지에 초점을 맞추는 인터페이스를 얻을 수 있습니다.

### 행동이 상태를 결정한다.

- 객체는 협력에 참여하기 위해 존재합니다.
    - 따라서 객체는 협력에 필요한 행동을 제공해야 합니다.
    - 객체의 행동은 협력에 참여할 수 있는 유일한 방법입니다.
- 행동이 아니라 상태에 초점을 맞춰서 개발하는 방식은 내부 구현을 객체의 퍼블릭 인터페이스에 노출하도록 만들기 때문에 캡슐화가 저해됩니다.
- 캡슐화를 위반하지 않도록 구현을 뒤로 미루고, 객체의 행위를 고려하기 위해 상상 협력이라는 문맥 안에서 객체를 생각해야 합니다.
- 협력은 객체의 행동을 결정하고, 객체의 행동은 객체의 상태를 결정합니다. 그리고 행동이 곧 객체의 책임이됩니다.

### 역할

- 객체가 특정한 협력 안에서 수행하는 책임의 집합입니다.
- 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있습니다.

### 객체 대 역할

- 역할은 객체가 참여할 수 있는 일종의 슬롯입니다.
- 협력에서 책임을 수행하는 대상이 한 종류라면 객체로 간주하지만, 여러 종류의 객체가 참여 가능하다면 역할이라고 부르면 됩니다.
- 협력을 구체적인 객체가 아니라 추상적인 역할의 관점에서 설계하면 협력이 유연하고 재사용 가능해집니다.

### 역할과 추상화

- 역할은 공통의 책임을 바탕으로 객체의 종류를 숨기기 때문에 객체의 추상화로 볼 수 있습니다.
- 협력의 관점으로 보는 추상화의 장점은 다음과 같습니다.
- 상위 수준의 정책의 핵심 부분만 간단하게 표현할 수 있습니다.
- 다양한 종류의 객체를 끼워넣을 수 있기 때문에 설계를 유연하게 만들 수 있습니다.