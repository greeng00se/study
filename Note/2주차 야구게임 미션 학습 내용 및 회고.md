### 2주차 회고

그동안 배운 객체지향에 관한 것 + 새로운 것을 적용해 보려고 매우 몰입했던 한 주입니다.

2주 차에는 요구사항을 만족하는 것 이외에 다음 목표를 기준으로 삼았습니다.

- 역할, 책임, 협력의 관점에서 객체들을 지속적으로 생각하기
- 응집도, 결합도, 의존성 관점에서도 생각해 보기
- red → green → refactor의 TDD 사이클 적용하여 코드 작성하기
- 객체지향 생활체조에 언급된 원칙들을 최대한 만족하려고 노력하기
- 1개의 들여 쓰기, 메서드 라인 수 최대 10라인 적용하기

초반에는 요구사항을 정리한 뒤 해당 책임은 누가 가지는 것이 좋을까?에 대한 생각이 너무 많아서 쉽게 미션을 시작하지 못했던 부분이 아쉬웠습니다. 간단한 야구 게임인 것 같아도 객체지향적으로 잘 작성해야겠다고 생각하니 어려웠습니다.

어느 정도 구조가 머릿속에서 정리되고 난 이후로는 탄력이 붙어서 진행속도가 조금 빨라진 것 같았습니다. 특히 객체지향 생활체조에 있는 내용들이 도움이 많이 된 것 같습니다.

이번 주 미션에서는 TDD 사이클을 자연스럽게 적용하지 못한 점이 많이 아쉬웠습니다.

쉬운 부분에서는 TDD 사이클을 지키면서 작성하도록 노력을 했지만 코드가 복잡해지면서 점점 적용하기 어려운 부분이 있었습니다. 그렇기 때문에 아직 TDD의 연습이 덜 되었다고 생각했습니다. 그리고 내가 하고 있는 것이 잘 하고 있는 것인지 혼자 판단해야 했기에 알기 어려운 부분이 있었습니다. 하지만 덕분에 혼자 생각을 하는 시간이 많아진 것 같기도 합니다.

기다리고 기다리던 2주 차부터 커뮤니티에서 다른 사람들의 코드를 리뷰할 수 있었습니다.

나 자신이 소프트 스킬이 많이 부족하다고 생각하여 다른 사람들이 나의 코드 리뷰를 받았을 때 속상해하지 않을까?에 대한 생각이 많이 들었고, 좋은 코드 리뷰를 하는 법 같은 것을 찾아보면서 최대한 좋은 리뷰를 작성하려고 노력했습니다. 정말 좋은 경험이었던 것 같습니다.

얼른 다음 주가 되어서 2주 차의 코드도 리뷰하고 또한 리뷰 받아 성장하고 싶은 마음이 굴뚝같습니다.

또한 다음주에는 이번 주에 부족했다고 느꼈던 TDD를 더욱 더 제대로 해보고 싶습니다!

이번 주도 고민하느라 머리를 쥐어짰지만 만족감이 넘치는 한 주를 보낸 것 같습니다.

### 야구 게임

1주차는 야구게임에 관한 미션이었습니다.

추가된 요구사항은 다음과 같습니다.

- indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현한다. 2까지만 허용한다.
- 3항 연산자를 쓰지 않고 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들어라.
- JUnit 5와 AssertJ를 이용하여 본인이 정리한 기능 목록이 정상 동작함을 테스트 코드로 확인한다.

저는 극단적으로 1개의 들여 쓰기와 메서드 라인 수를 최대 10라인으로 적용하기로 했습니다.

### 책임 분리하기

시작하기에 앞서 요구사항을 정리하면서 객체의 책임에 대해 곰곰히 생각을 많이 했습니다.

콘솔 입출력이 있기 때문에 MVC 패턴을 생각했고 아래와 같은 모양이었습니다.

![image](https://user-images.githubusercontent.com/58586537/200586227-4994828b-058c-4dab-b972-e7ddef147f8d.png)

리팩토링을 거쳐나가며 다음과 같이 처음과 약간 다른 모양을 가지게 되었습니다.

![image](https://user-images.githubusercontent.com/58586537/200586272-d2a81bc0-8132-478b-ba37-d39a67bb1311.png)

위 구성도를 토대로 하나씩 생각한 것들을 정리해보겠습니다.

### View 분리하기

처음에 입력과 출력을 처리하는 책임을 각각 나눠서 분리를 해야겠다고 생각했습니다.

하지만 입력에는 잘못 입력된 값에 대해 예외를 던져야 하는 부분이 필요했습니다.

사용자의 입력에 대한 검증을 하는 책임은 누구에게 할당해야 할까? 라는 생각이 들었고 처음에는 `InputView`가 입력과 입력에 대한 검증까지 수행하도록 생각을 했다가 코드를 작성해나가며 클래스의 크기가 커지는 걸 보면서 입력을 검증하는 책임을 갖도록 할  `InputValidator` 클래스를 하나 새로 만들어서 `InputView`가 검증에 대한 책임을 위임하도록 했습니다.

```java
class InputValidator {
    private static final int VALID_BASEBALL_LENGTH = 3;
    private static final char START_RANGE = '1';
    private static final char END_RANGE = '9';
    private static final String VALID_GAME_STATUS_PLAY = "1";
    private static final String VALID_GAME_STATUS_STOP = "2";

    private InputValidator() {
    }

    public static void validateBaseballNumber(String baseballNumber) {
        if (baseballNumber.length() != VALID_BASEBALL_LENGTH
                || getDistinctNumberCount(baseballNumber) != VALID_BASEBALL_LENGTH) {
            throw new IllegalArgumentException();
        }
    }
    ...
}
```

`InputValidator`의 경우 `package-private` 접근 제어자를 사용하여 view 패키지의 `InputView`만 접근이 가능하도록 했습니다.

### 일급 컬렉션과 원시 값 포장

객체지향 생활체조에는 원시 값 포장과, 일급 컬렉션을 사용하라는 내용이 있습니다.

일급 컬렉션은 향로님의 [일급 컬렉션 (First Class Collection)의 소개와 써야할 이유](https://jojoldu.tistory.com/412)

원시 값 포장과 반복적으로 사용되는 인스턴스 캐싱은 [우테코 2기의 스티치님의 반복적으로 사용되는 인스턴스 캐싱하기](https://tecoble.techcourse.co.kr/post/2020-06-24-caching-instance/) 게시물을 참고했습니다.

## 추가로 도전한 것

### 계층형 테스트 코드

예전에 John Grib님의 아티클인 [JUnit5로 계층 구조의 테스트 코드 작성하기](https://johngrib.github.io/wiki/junit5-nested/)를 읽은 적 이있었습니다.

이를 우테코 프리코스 미션에 적용을 해보고 싶어