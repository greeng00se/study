https://www.youtube.com/watch?v=Ovcy02QFt9c

### 서버 성능테스트란?

API 요청이 많은 상황에서 서버가 어떻게 동작하는지 확인하기 위해 수행하는 테스트

### 서버 성능 테스트를 하는 이유는?

요청 정상 처리 확인

병목이 되는 지점 확인

### 성능 테스트, 언제 할까?

트래픽 인입이 많을 것을 예상되는 서비스를 오픈하는 경우

기존 서비스에 병목의 가능성이 있는 변경사항이 생기는 경우

평소보다 트래픽을 훨씬 많이 받아야 하는 경우

### 어떤 부분이 성능 테스트를 힘들게 만들까

부하 생성기의 경우 자동화가 잘 되어있음.

서버 환경을 재구축하는 과정이 오래 걸린다.

→ 모니터링 보드가 잘 구축되어있어도 지표를 관측하고 기록하는 일이 오래걸린다.

### 성능테스트 과정

성능 테스트 시나리오 구상 → 어떻게 부하 줄 것인지 결정 + 동작 예측 + 필요한 데이터 준비

테스트 환경 구축 → 서버 수, 서버 스펙 결정, scale up & scale out

성능 테스트 생성 및 수행

테스트 결과 지표 관측 및 기록

테스트 결과 분석 → 기대하던 대로 동작했는지

성능 테스트 시나리오 구상 + 테스트 결과 분석 ← 창의적이고 복잡한 사고 필요

### 성능 테스트

nGrinder → REST API 지원

AWS CLI

Jenkins → Groovy script pipeline

테스트 결과 → slack(ngrinder 결과 + 모니터링 지표)

### 구현 방법

추가 고민했던 부분

- 사용하는 인프라나 성능 테스트 시나리오가 달라지더라도 파이프라인을 쉽게 수정하고 재사용해야 한다.
- 최소한의 코드 작성으로 자유롭게 파이프라인을 구성할 수 있어야 한다.

→ Jenkins Job으로 잘게 분리

테스트 환경 구축 Job → AWS Cli + shell script

성능 테스트 수행 + 지표 기록 → Ngrinder REST API + shell script

파이프라인 조립 build job으로 다른 Job을 트리거

### 어떻게 구현할까?

뭘로 구현 하느냐 보다는 어떻게 문제를 푸느냐

### 자동화를 통해 얻을 수 있는 이점

실수 없이 같은 성능 테스트 재현 가능

옆에서 항상 기록하면서 지켜봐야 하는 사람이 필요 없음

불필요한 자원 낭비를 줄일 수 있음

### 어떤 시스템에서 성능 테스트를 자동화해야 할까?

트래픽이 많고, 서버 성능 측정을 자주 해야하는 경우

일회성으로 많으 트래픽을 받아야 하는 경우

트래픽 변동이 커서 scale out & scale in이 자주 일어나는 경우

이런 자동화된 시스템을 만드는 것도 다 비용이기 때문에 모든 시스템에 자동화된 성능 테스트가 필요한 것이 아니다.