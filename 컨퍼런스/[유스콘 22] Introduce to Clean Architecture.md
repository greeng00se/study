### 아키텍처에 중요한 것

세부사항 → 프레임워크, 데이터베이스, 캐시

가장 중요한 것 → 핵심 비즈니스 로직, 유스케이스

유스케이스 → 시스템이 있어야 유효한 비즈니스 로직

도메인은 세부사항에 의존해서는 안된다.

### 계층형 아키텍처의 문제점

데이터베이스 중심의 설계와 개발이 된다.

넓은 서비스로 인해 유스케이스 파악이 어렵다. ex) MemberService

테스트 작성 및 관리가 어려워진다. → 빈약한 엔티티 모델

서로 다른 이유로 변경되는 코드들이 결합되기 쉽다.

- SRP → 변경의 이유가 하나여야 한다. 하지만 계층형 아키텍처는 이를 위반하기 쉽다.

서로 다른 수준으로 변경되는 코드들이 결합되기 쉽다.

### 클린 아키텍처?

테스트 하기 쉬운 아키텍처

소리치는 아키텍처 → 어떤 시스템인지, 어떤 유즈케이스를 손쉽게 파악할 수 있어야 한다.

플러그인 아키텍처 → 핵심을 세부사항으로 분리하고, 플러그인 형채로 손쉽게 바꿀 수 있는 구조

도메인 중심 아키텍처

- DIP → 고수준 모듈이 저수준 모듈에 의존해서는 안된다.
- 컴파일 의존성 ≠ 런타임 의존성

### 아키텍처를 구성할 때 중요한것

서비스 계층을 유스케이스 단위로 분리

추상화되지 않은 세부 사항에 의존한다면 DIP를 적용

객체의 데이터만 필요로 하는 로직들을 객체의 내부로 이동 → RIch Domain

package-private 가시성 적극 활용

세부 결정 사항들은 결정을 최대한 미루기

- 테이블 설계 → 테이블에 확신이 들 때까지 설계를 미루기
- 추상화 → 추상화 도입으로 비용이 더 저렴해지는 시점까지 미루기
- 서비스 분리 → 분리하지 않으면 안되는 시점까지 미루기
- 캐시 적용 → Slow 요청들에 의해 필요해지는 시점까지 미루기

> 좋은 아키텍트는 결정되지 않은 사항의 수를 최대화한다.
로버트 마틴
>